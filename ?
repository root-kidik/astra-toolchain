- [postgresql 16.4](https://ftp.postgresql.org/pub/source/v16.4/postgresql-16.4.tar.gz)

download_wget postgresql postgresql-16.4 https://ftp.postgresql.org/pub/source/v16.4/postgresql-16.4.tar.gz

ENV POSTGRESQL_SOURCE_DIR=/postgresql
ENV POSTGRESQL_BUILD_DIR=$POSTGRESQL_SOURCE_DIR-build
COPY $POSTGRESQL_SOURCE_DIR $POSTGRESQL_SOURCE_DIR
RUN mkdir $POSTGRESQL_BUILD_DIR && cd $POSTGRESQL_BUILD_DIR && \
    $POSTGRESQL_SOURCE_DIR/configure \
        CC="$TOOLCHAIN_CC" \
        CXX="$TOOLCHAIN_CXX" \
        CFLAGS="$TOOLCHAIN_CFLAGS" \
        CXXFLAGS="$TOOLCHAIN_CXXFLAGS" \
        LDFLAGS="$TOOLCHAIN_LDFLAGS" \
        --enable-static=yes \
        --enable-shared=no \
        --without-icu \
        --without-readline \
        --prefix=$TOOLCHAIN_DIR/usr && \
    make -j$NPROC && make install && \
    cd .. && rm -rf $POSTGRESQL_SOURCE_DIR $POSTGRESQL_BUILD_DIR